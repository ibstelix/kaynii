<!doctype html>
<html>

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0,user-scalable=0">
<title>APICloud</title>
<link rel="stylesheet" type="text/css" href="../css/base.css" />
<link rel="stylesheet" type="text/css" href="../css/common.css" />
<script src="../script/rong.js" type="text/javascript"></script>

</head>

<body>
<div id="wrap">
    <div id="main">
        <div>
            <input type="button" onclick="connect()" value="connect" />
            <input type="button" onclick="reconnect()" value="reconnect" />
            <br>
            <br>
            <input type="button" onclick="disconnect()" value="disconnect" />
            <input type="button" onclick="logout()" value="logout" />
            <br>
            <input type="button" onclick="setOnReceivePushMessageListener()" value="setOnReceivePushMessageListener" />
            <br>
            <input type="button" onclick="setOnReceiveMessageListener()" value="setOnReceiveMessageListener" />
            <input type="button" onclick="setConnectionStatusListener()" value="setConnectionStatusListener" />
            <br>
            <br>
            <input type="button" onclick="getConversationList()" value="getConversationList" />
            <br>
            <input type="button" onclick="getConversation()" value="getConversation" />
            <br>
            <input type="button" onclick="removeConversation()" value="removeConversation" />
            <br>
            <input type="button" onclick="setConversationToTop()" value="setConversationToTop" />
            <br>
            <input type="button" onclick="getTotalUnreadCount()" value="getTotalUnreadCount" />
            <br>
            <input type="button" onclick="getUnreadCount()" value="getUnreadCount" />
            <br>
            <input type="button" onclick="getUnreadCountByConversationTypes()" value="getUnreadCountByConversationTypes" />
            <br>
            <input type="button" onclick="getLatestMessages()" value="getLatestMessages" />
            <br>
            <input type="button" onclick="getHistoryMessages()" value="getHistoryMessages" />
            <br>
            <input type="button" onclick="getHistoryMessagesByObjectName()" value="getHistoryMessagesByObjectName" />
            <br>
            <input type="button" onclick="deleteMessages()" value="deleteMessages" />
            <br>
            <input type="button" onclick="clearMessages()" value="clearMessages" />
            <br>
            <input type="button" onclick="clearMessagesUnreadStatus()" value="clearMessagesUnreadStatus" />
            <br>
            <input type="button" onclick="setMessageExtra()" value="setMessageExtra" />
            <br>
            <input type="button" onclick="setMessageReceivedStatus()" value="setMessageReceivedStatus" />
            <br>
            <input type="button" onclick="getTextMessageDraft()" value="getTextMessageDraft" />
            <br>
            <input type="button" onclick="saveTextMessageDraft()" value="saveTextMessageDraft" />
            <br>
            <input type="button" onclick="clearTextMessageDraft()" value="clearTextMessageDraft" />
            <br>
            <input type="button" onclick="createDiscussion()" value="createDiscussion" />
            <br>
            <input type="button" onclick="getDiscussion()" value="getDiscussion" />
            <br>
            <input type="button" onclick="setDiscussionName()" value="setDiscussionName" />
            <br>
            <input type="button" onclick="addMemberToDiscussion()" value="addMemberToDiscussion" />
            <br>
            <input type="button" onclick="removeMemberFromDiscussion()" value="removeMemberFromDiscussion" />
            <br>
            <input type="button" onclick="quitDiscussion()" value="quitDiscussion" />
            <br>
            <input type="button" onclick="sendTextMessage()" value="sendTextMessage" />
            <br>
            <input type="button" onclick="sendImageMessage()" value="sendImageMessage" />
            <br>
            <input type="button" onclick="sendVoiceMessage()" value="sendVoiceMessage" />
            <br>
            <input type="button" onclick="sendRichContentMessage()" value="sendRichContentMessage" />
            <br>
            <input type="button" onclick="sendLocationMessage()" value="sendLocationMessage" />
            <br>
            <input type="button" onclick="sendCommandNotificationMessage()" value="sendCommandNotificationMessage" />
            <br>
            <input type="button" onclick="getConversationNotificationStatus()" value="getConversationNotificationStatus" />
            <br>
            <input type="button" onclick="setConversationNotificationStatus()" value="setConversationNotificationStatus" />
            <br>
            <input type="button" onclick="setDiscussionInviteStatus()" value="setDiscussionInviteStatus" />
            <br>
            <input type="button" onclick="syncGroup()" value="syncGroup" />
            <br>
            <input type="button" onclick="joinGroup()" value="joinGroup" />
            <br>
            <input type="button" onclick="quitGroup()" value="quitGroup" />
            <br>
            <input type="button" onclick="joinChatRoom()" value="joinChatRoom" />
            <br>
            <input type="button" onclick="quitChatRoom()" value="quitChatRoom" />
            <br>
            <input type="button" onclick="clearConversations()" value="clearConversations" />
            <br>
            <br>
            <input type="button" onclick="setMessageSentStatus()" value="setMessageSentStatus" />
            <br>
            <br>
            <input type="button" onclick="addToBlacklist()" value="addToBlacklist" />
            <br>
            <br>
            <input type="button" onclick="removeFromBlacklist()" value="removeFromBlacklist" />
            <br>
            <br><br>
            <br>
            <input type="button" onclick="getConnectionStatus()" value="getConnectionStatus" />
            <br>
            <br>
            <input type="button" onclick="getBlacklist()" value="getBlacklist" />
            <br>
        </div>

    </div>
</div>
</body>
<script type="text/javascript">
    apiready = function(){

        var rong = api.require('rongCloud2');
        var resultCallback = function(ret, err) {
                alert(JSON.stringify(ret));
            }
        rong.setOnReceiveMessageListener(null, resultCallback);

        api.addEventListener({
            name: 'message'
        }, function(ret){
            if(ret && ret.value){
                var value = ret.value;
                alert('main: ' + value.result + ' , ' + value.error);
            }
        });

        api.addEventListener({
            name: 'myEvent'
        }, function(ret){
            if(ret && ret.value){
                var value = ret.value;
                alert('myEvent');
            }
        });
    }
</script>
</html>